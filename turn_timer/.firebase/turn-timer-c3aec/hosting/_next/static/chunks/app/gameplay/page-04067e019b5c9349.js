(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[851],{4639:(e,t,r)=>{Promise.resolve().then(r.bind(r,2171))},2171:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var a=r(5155),s=r(2115),n=r(6046),i=r(3857);function l(e){let{duration:t,timeLeft:r,setTimeLeft:n,onTimeUp:i,isRunning:l}=e;(0,s.useEffect)(()=>{let e;return l&&r>0&&(e=setInterval(()=>{n(t=>{let r=t-1;return r<=0?(clearInterval(e),setTimeout(i,0),0):r})},1e3)),()=>clearInterval(e)},[l,r,i,n]);let o=Math.floor(r/60),d=r%60,c=Math.min(r/t*100,100);return(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"text-6xl font-bold tabular-nums",children:o>0?"".concat(o,":").concat(d.toString().padStart(2,"0")):d}),(0,a.jsx)("div",{className:"w-full bg-secondary rounded-full h-2.5",children:(0,a.jsx)("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-1000 ease-linear",style:{width:"".concat(c,"%")}})})]})}var o=r(3312),d=r(2517),c=r(4683),u=r(2795);function m(e){let{onStart:t,onAddTime:r,onPause:s,isRunning:n,isPaused:i,addTimeInterval:l,autoStart:m}=e;return(0,a.jsxs)("div",{className:"flex justify-center space-x-4",children:[!n&&!i&&!m&&(0,a.jsxs)(o.$,{onClick:t,children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"})," Start"]}),i&&(0,a.jsxs)(o.$,{onClick:t,children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"})," Resume"]}),n&&!i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.$,{onClick:r,children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"})," ",l,"s"]}),(0,a.jsxs)(o.$,{onClick:s,variant:"secondary",children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"})," Pause"]})]})]})}var f=r(394),x=r(1567);let h=f.bL,g=f.l9,v=f.ZL,p=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(f.hJ,{className:(0,x.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...s,ref:t})});p.displayName=f.hJ.displayName;let j=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsxs)(v,{children:[(0,a.jsx)(p,{}),(0,a.jsx)(f.UC,{ref:t,className:(0,x.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...s})]})});j.displayName=f.UC.displayName;let y=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,x.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};y.displayName="AlertDialogHeader";let N=e=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:(0,x.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};N.displayName="AlertDialogFooter";let b=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(f.hE,{ref:t,className:(0,x.cn)("text-lg font-semibold",r),...s})});b.displayName=f.hE.displayName;let w=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(f.VY,{ref:t,className:(0,x.cn)("text-sm text-muted-foreground",r),...s})});w.displayName=f.VY.displayName;let S=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(f.rc,{ref:t,className:(0,x.cn)((0,o.r)(),r),...s})});S.displayName=f.rc.displayName;let k=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(f.ZD,{ref:t,className:(0,x.cn)((0,o.r)({variant:"outline"}),"mt-2 sm:mt-0",r),...s})});k.displayName=f.ZD.displayName;var P=r(7581),C=r(1801);function E(){let e=(0,n.useRouter)(),{settings:t}=(0,P.t)(),{players:r}=(0,C.O)(),[d,c]=(0,s.useState)(!1),[u,f]=(0,s.useState)(!1),[x,v]=(0,s.useState)(0),[p,E]=(0,s.useState)(t.turnDuration);(0,s.useEffect)(()=>{c(t.autoStart),E(t.turnDuration)},[t]);let T=r[x%r.length],D=r[(x+1)%r.length],I=r[(x-1+r.length)%r.length];(0,s.useEffect)(()=>{x>=r.length&&v(0)},[x,r]);let A=()=>{v((x+1)%r.length),E(t.turnDuration),f(!1),c(t.autoStart)},z=()=>{v((x-1+r.length)%r.length),E(t.turnDuration),f(!1),c(t.autoStart)};return r&&0!==r.length?T&&D&&I?(0,a.jsx)(i.A,{title:"".concat(T.name,"'s Turn"),children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(l,{duration:t.turnDuration,timeLeft:p,setTimeLeft:E,onTimeUp:()=>{c(!1),E(0),f(!1),A()},isRunning:d}),(0,a.jsx)(m,{onStart:()=>{c(!0),f(!1)},onAddTime:()=>{E(e=>e+t.addTimeInterval)},onPause:()=>{c(!1),f(!0)},isRunning:d,isPaused:u,addTimeInterval:t.addTimeInterval,autoStart:t.autoStart}),(0,a.jsxs)("div",{className:"text-center text-muted-foreground",children:["Next Player: ",D.name,(0,a.jsx)("br",{}),"Previous Player: ",I.name]}),(0,a.jsxs)("div",{className:"flex flex-row justify-center gap-4",children:[(0,a.jsx)(o.$,{onClick:()=>{z()},size:"lg",children:"Previous Turn"}),(0,a.jsx)(o.$,{onClick:()=>{A()},size:"lg",children:"Next Turn"})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsxs)(h,{children:[(0,a.jsx)(g,{asChild:!0,children:(0,a.jsx)(o.$,{variant:"outline",children:"End Game"})}),(0,a.jsxs)(j,{children:[(0,a.jsxs)(y,{children:[(0,a.jsx)(b,{children:"Are you sure you want to end the game?"}),(0,a.jsx)(w,{children:"This action cannot be undone."})]}),(0,a.jsxs)(N,{children:[(0,a.jsx)(k,{children:"Cancel"}),(0,a.jsx)(S,{onClick:()=>{e.push("/history")},children:"End Game"})]})]})]})})]})}):(0,a.jsx)("div",{className:"text-center p-4",children:"Loading players..."}):(0,a.jsxs)("div",{className:"text-center p-4 space-y-4",children:[(0,a.jsx)("div",{children:"No players available. Please add players in the homepage."}),(0,a.jsx)(o.$,{onClick:()=>e.push("/"),children:"Go to Homepage"})]})}function T(){return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(E,{})})}},3857:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var a=r(5155),s=r(8173),n=r.n(s),i=r(689),l=r(3474),o=r(6046),d=r(2115);function c(e){let{children:t,title:r}=e,s=(0,o.usePathname)(),d=(0,o.useSearchParams)().get("returnTo")||"/";return(0,a.jsxs)("div",{className:"min-h-screen bg-background text-foreground transition-colors duration-300",children:[(0,a.jsxs)("header",{className:"p-4 flex justify-between items-center border-b transition-colors duration-300",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold transition-colors duration-300",children:r}),"/settings"===s?(0,a.jsx)(n(),{href:d,className:"text-muted-foreground hover:text-foreground transition-colors duration-300",children:(0,a.jsx)(i.A,{size:24})}):(0,a.jsx)(n(),{href:"/settings?returnTo=".concat(s),className:"text-muted-foreground hover:text-foreground transition-colors duration-300",children:(0,a.jsx)(l.A,{size:24})})]}),(0,a.jsx)("main",{className:"p-4 transition-colors duration-300",children:t})]})}function u(e){return(0,a.jsx)(d.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(c,{...e})})}},3312:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>o});var a=r(5155),s=r(2115),n=r(2317),i=r(1027),l=r(1567);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(o({variant:s,size:i,className:r})),ref:t,...c})});d.displayName="Button"},1801:(e,t,r)=>{"use strict";r.d(t,{J:()=>i,O:()=>l});var a=r(5155),s=r(2115);let n=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,s.useState)(()=>{{let e=sessionStorage.getItem("players");return e?JSON.parse(e):[]}});return(0,s.useEffect)(()=>{sessionStorage.setItem("players",JSON.stringify(r))},[r]),(0,a.jsx)(n.Provider,{value:{players:r,addPlayer:e=>{if(e.trim()){let t={id:Date.now().toString(),name:e.trim(),order:r.length};i([...r,t])}},removePlayer:e=>{i(r.filter(t=>t.id!==e))},reorderPlayers:e=>{i(e.map((e,t)=>({...e,order:t})))},resetPlayers:()=>{i([]),sessionStorage.removeItem("players")}},children:t})}function l(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("usePlayers must be used within a PlayerProvider");return e}},7581:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l,t:()=>o});var a=r(5155),s=r(2115);let n={autoStart:!0,addTimeInterval:10,turnDuration:60,darkMode:!1},i=(0,s.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,s.useState)(n),[o,d]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{if(!o)try{let e=(e,t)=>{let r=localStorage.getItem(e);return r?JSON.parse(r):t},t=window.matchMedia("(prefers-color-scheme: dark)").matches,r={autoStart:e("autoStart",n.autoStart),addTimeInterval:e("addTimeInterval",n.addTimeInterval),turnDuration:e("turnDuration",n.turnDuration),darkMode:e("darkMode",t)};l(r),d(!0)}catch(e){console.error("Error loading settings:",e)}},[o]),(0,a.jsx)(i.Provider,{value:{settings:r,updateSettings:e=>{let t={...r,...e};try{Object.entries(e).forEach(e=>{let[t,r]=e;localStorage.setItem(t,JSON.stringify(r))})}catch(e){console.error("Error saving settings:",e)}l(t)}},children:t})}function o(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useSettings must be used within a SettingsProvider");return e}},1567:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(3463),s=r(9795);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[529,362,441,517,358],()=>t(4639)),_N_E=e.O()}]);